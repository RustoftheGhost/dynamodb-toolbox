"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5955],{15680:(e,t,n)=>{n.d(t,{xA:()=>y,yg:()=>p});var a=n(96540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},y=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,y=i(e,["components","mdxType","originalType","parentName"]),d=u(n),g=r,p=d["".concat(s,".").concat(g)]||d[g]||c[g]||l;return n?a.createElement(p,o(o({ref:t},y),{},{components:n})):a.createElement(p,o({ref:t},y))}));function p(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=g;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:r,o[1]=i;for(var u=2;u<l;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},19365:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(96540),r=n(20053);const l={tabItem:"tabItem_Ymn6"};function o(e){let{children:t,hidden:n,className:o}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.A)(l.tabItem,o),hidden:n},t)}},11470:(e,t,n)=>{n.d(t,{A:()=>N});var a=n(58168),r=n(96540),l=n(20053),o=n(23104),i=n(56347),s=n(57485),u=n(31682),y=n(89466);function d(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function c(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??d(n);return function(e){const t=(0,u.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function g(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function p(e){let{queryString:t=!1,groupId:n}=e;const a=(0,i.W6)(),l=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,s.aZ)(l),(0,r.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(a.location.search);t.set(l,e),a.replace({...a.location,search:t.toString()})}),[l,a])]}function m(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,l=c(e),[o,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!g({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:l}))),[s,u]=p({queryString:n,groupId:a}),[d,m]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,l]=(0,y.Dv)(n);return[a,(0,r.useCallback)((e=>{n&&l.set(e)}),[n,l])]}({groupId:a}),b=(()=>{const e=s??d;return g({value:e,tabValues:l})?e:null})();(0,r.useLayoutEffect)((()=>{b&&i(b)}),[b]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!g({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),m(e)}),[u,m,l]),tabValues:l}}var b=n(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function h(e){let{className:t,block:n,selectedValue:i,selectValue:s,tabValues:u}=e;const y=[],{blockElementScrollPositionUntilNextRender:d}=(0,o.a_)(),c=e=>{const t=e.currentTarget,n=y.indexOf(t),a=u[n].value;a!==i&&(d(t),s(a))},g=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=y.indexOf(e.currentTarget)+1;t=y[n]??y[0];break}case"ArrowLeft":{const n=y.indexOf(e.currentTarget)-1;t=y[n]??y[y.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:o}=e;return r.createElement("li",(0,a.A)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>y.push(e),onKeyDown:g,onClick:c},o,{className:(0,l.A)("tabs__item",f.tabItem,o?.className,{"tabs__item--active":i===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:a}=e;const l=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=l.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},l.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function T(e){const t=m(e);return r.createElement("div",{className:(0,l.A)("tabs-container",f.tabList)},r.createElement(h,(0,a.A)({},e,t)),r.createElement(v,(0,a.A)({},e,t)))}function N(e){const t=(0,b.A)();return r.createElement(T,(0,a.A)({key:String(t)},e))}},60932:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>y,contentTitle:()=>s,default:()=>p,frontMatter:()=>i,metadata:()=>u,toc:()=>d});var a=n(58168),r=(n(96540),n(15680)),l=n(11470),o=n(19365);const i={title:"Query",sidebar_custom_props:{sidebarActionType:"read"}},s="QueryCommand",u={unversionedId:"tables/actions/query/index",id:"tables/actions/query/index",title:"Query",description:"Performs a Query Operation on a Table:",source:"@site/docs/2-tables/2-actions/2-query/index.md",sourceDirName:"2-tables/2-actions/2-query",slug:"/tables/actions/query/",permalink:"/docs/tables/actions/query/",draft:!1,tags:[],version:"current",frontMatter:{title:"Query",sidebar_custom_props:{sidebarActionType:"read"}},sidebar:"tutorialSidebar",previous:{title:"Scan",permalink:"/docs/tables/actions/scan/"},next:{title:"Batching",permalink:"/docs/tables/actions/batching/"}},y={},d=[{value:"Request",id:"request",level:2},{value:"<code>.query(...)</code>",id:"query",level:3},{value:"<code>.entities(...)</code>",id:"entities",level:3},{value:"<code>.options(...)</code>",id:"options",level:3},{value:"Response",id:"response",level:2}],c={toc:d},g="wrapper";function p(e){let{components:t,...n}=e;return(0,r.yg)(g,(0,a.A)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"querycommand"},"QueryCommand"),(0,r.yg)("p",null,"Performs a ",(0,r.yg)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Query.html"},"Query Operation")," on a ",(0,r.yg)("inlineCode",{parentName:"p"},"Table"),":"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"import { QueryCommand } from 'dynamodb-toolbox/table/actions/query'\n\nconst queryCommand = PokeTable.build(QueryCommand)\n\nconst params = queryCommand.params()\nconst { Items } = await queryCommand.send()\n")),(0,r.yg)("h2",{id:"request"},"Request"),(0,r.yg)("h3",{id:"query"},(0,r.yg)("inlineCode",{parentName:"h3"},".query(...)")),(0,r.yg)("p",{style:{marginTop:"-15px"}},(0,r.yg)("i",null,"(required)")),(0,r.yg)("p",null,"The partition to query, with optional index and range condition:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"partition"),": The partition key to query"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("code",null,"index ",(0,r.yg)("i",null,"(optional)")),": The name of a secondary index to query"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("code",null,"range ",(0,r.yg)("i",null,"(optional)")),": If the table or index has a sort key, an additional ",(0,r.yg)("a",{href:"../../entities/actions/parse-condition#range-conditions"},"Range or Equality Condition"))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"// Get 'ashKetchum' pokemons with a level \u2265 50\nawait PokeTable.build(QueryCommand)\n  .query({\n    index: 'byTrainerId',\n    partition: 'TRAINER:ashKetchum',\n    range: { gte: 50 }\n  })\n  .send()\n")),(0,r.yg)("p",null,"You can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"Query")," type to explicitly type an object as a ",(0,r.yg)("inlineCode",{parentName:"p"},"QueryCommand")," query object:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"import type { Query } from 'dynamodb-toolbox/table/actions/query'\n\nconst query: Query<typeof PokeTable> = {\n  index: 'byTrainerId',\n  partition: 'TRAINER:ashKetchum1',\n  range: { gte: 50 }\n}\n\nconst { Items } = await PokeTable.build(QueryCommand)\n  .query(query)\n  .send()\n")),(0,r.yg)("h3",{id:"entities"},(0,r.yg)("inlineCode",{parentName:"h3"},".entities(...)")),(0,r.yg)("p",null,"Provides a list of entities to filter the returned items (via the internal ",(0,r.yg)("a",{parentName:"p",href:"/docs/entities/usage/#entity-attribute"},(0,r.yg)("inlineCode",{parentName:"a"},"entity"))," attribute). Also formats them and types the response."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"// \ud83d\udc47 Typed as (Pokemon | Trainer)[]\nconst { Items } = await PokeTable.build(QueryCommand)\n  .query(query)\n  .entities(PokemonEntity, TrainerEntity)\n  .send()\n")),(0,r.yg)("h3",{id:"options"},(0,r.yg)("inlineCode",{parentName:"h3"},".options(...)")),(0,r.yg)("p",null,"Provides additional options:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"const { Items } = await PokeTable.build(QueryCommand)\n  .options({\n    consistent: true,\n    limit: 10\n    ...\n  })\n  .send()\n")),(0,r.yg)("p",null,"You can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"QueryOptions")," type to explicitly type an object as a ",(0,r.yg)("inlineCode",{parentName:"p"},"QueryCommand")," options object:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"import type { QueryOptions } from 'dynamodb-toolbox/table/actions/query'\n\nconst queryOptions: QueryOptions<\n  typeof PokeTable,\n  // \ud83d\udc47 Optional entities\n  [typeof PokemonEntity, typeof TrainerEntity]\n> = {\n  consistent: true,\n  limit: 10,\n  ...\n}\n\nconst { Items } = await PokeTable.build(QueryCommand)\n  .query(query)\n  .entities(PokemonEntity, TrainerEntity)\n  .options(queryOptions)\n  .send()\n")),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"It is advised to provide ",(0,r.yg)("inlineCode",{parentName:"p"},"entities")," and ",(0,r.yg)("inlineCode",{parentName:"p"},"query")," first as they constrain the ",(0,r.yg)("inlineCode",{parentName:"p"},"options")," type.")),(0,r.yg)("p",null,"Available options (see the ",(0,r.yg)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Query.html#API_Query_RequestParameters"},"DynamoDB documentation")," for more details):"),(0,r.yg)("table",null,(0,r.yg)("thead",null,(0,r.yg)("tr",null,(0,r.yg)("th",null,"Cat."),(0,r.yg)("th",null,"Option"),(0,r.yg)("th",null,"Type"),(0,r.yg)("th",null,"Default"),(0,r.yg)("th",null,"Description"))),(0,r.yg)("tbody",null,(0,r.yg)("tr",null,(0,r.yg)("td",{rowSpan:"5",align:"center",class:"vertical"},(0,r.yg)("b",null,"General")),(0,r.yg)("td",null,(0,r.yg)("code",null,"consistent")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"boolean")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"false")),(0,r.yg)("td",null,"By default, read operations are ",(0,r.yg)("b",null,"eventually")," consistent (which improves performances and reduces costs).",(0,r.yg)("br",null),(0,r.yg)("br",null),"Set to ",(0,r.yg)("code",null,"true")," to use ",(0,r.yg)("b",null,"strongly")," consistent reads (unavailable on secondary indexes).")),(0,r.yg)("tr",null,(0,r.yg)("td",null,(0,r.yg)("code",null,"index")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"string")),(0,r.yg)("td",{align:"center"},"-"),(0,r.yg)("td",null,"The name of a secondary index to query.",(0,r.yg)("br",null),(0,r.yg)("br",null),"This index can be any local secondary index or global secondary index.")),(0,r.yg)("tr",null,(0,r.yg)("td",null,(0,r.yg)("code",null,"reverse")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"boolean")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"false")),(0,r.yg)("td",null,"Specifies the order for index traversal.",(0,r.yg)("br",null),(0,r.yg)("br",null),"By default, the traversal is performed in ascending order. If set to ",(0,r.yg)("code",null,"true"),", the traversal is performed in descending order.")),(0,r.yg)("tr",null,(0,r.yg)("td",null,(0,r.yg)("code",null,"capacity")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"CapacityOption")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,'"NONE"')),(0,r.yg)("td",null,"Determines the level of detail about provisioned or on-demand throughput consumption that is returned in the response.",(0,r.yg)("br",null),(0,r.yg)("br",null),"Possible values are ",(0,r.yg)("code",null,'"NONE"'),", ",(0,r.yg)("code",null,'"TOTAL"')," and ",(0,r.yg)("code",null,'"INDEXES"'),".")),(0,r.yg)("tr",null,(0,r.yg)("td",null,(0,r.yg)("code",null,"tableName")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"string")),(0,r.yg)("td",{align:"center"},"-"),(0,r.yg)("td",null,"Overrides the ",(0,r.yg)("code",null,"Table")," name. Mostly useful for ",(0,r.yg)("a",{href:"https://en.wikipedia.org/wiki/Multitenancy"},"multitenancy"),".")),(0,r.yg)("tr",null,(0,r.yg)("td",{rowSpan:"3",align:"center",class:"vertical"},(0,r.yg)("b",null,"Pagination")),(0,r.yg)("td",null,(0,r.yg)("code",null,"limit")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"integer \u2265 1")),(0,r.yg)("td",{align:"center"},"-"),(0,r.yg)("td",null,"The maximum number of items to evaluate for 1 page.",(0,r.yg)("br",null),(0,r.yg)("br",null),"Note that DynamoDB may return a lower number of items if it reaches the limit of 1MB, or if filters are applied.")),(0,r.yg)("tr",null,(0,r.yg)("td",null,(0,r.yg)("code",null,"exclusiveStartKey")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"Key")),(0,r.yg)("td",{align:"center"},"-"),(0,r.yg)("td",null,"The primary key of the first item that this operation evaluates. Use the ",(0,r.yg)("code",null,"LastEvaluatedKey")," from the previous operation.")),(0,r.yg)("tr",null,(0,r.yg)("td",null,(0,r.yg)("code",null,"maxPages")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"integer \u2265 1")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"1")),(0,r.yg)("td",null,'A "meta" option provided by DynamoDB-Toolbox to send multiple requests in a single promise.',(0,r.yg)("br",null),(0,r.yg)("br",null),"Note that ",(0,r.yg)("code",null,"Infinity")," is a valid (albeit dangerous) option.",(0,r.yg)("br",null),(0,r.yg)("br",null),"If two pages or more have been fetched, the responses ",(0,r.yg)("code",null,"Count")," and ",(0,r.yg)("code",null,"ScannedCount")," are summed, but the ",(0,r.yg)("code",null,"ConsumedCapacity")," is omitted for the moment.")),(0,r.yg)("tr",null,(0,r.yg)("td",{rowSpan:"3",align:"center",class:"vertical"},(0,r.yg)("b",null,"Filters")),(0,r.yg)("td",null,(0,r.yg)("code",null,"select")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"SelectOption")),(0,r.yg)("td",{align:"center"},"-"),(0,r.yg)("td",null,"The strategy for returned attributes. You can retrieve all attributes, specific attributes, the count of matching items, or in the case of an index, some or all of the projected attributes.",(0,r.yg)("br",null),(0,r.yg)("br",null),"Possible values are ",(0,r.yg)("code",null,'"ALL_ATTRIBUTES"'),", ",(0,r.yg)("code",null,'"ALL_PROJECTED_ATTRIBUTES"')," (if ",(0,r.yg)("code",null,"index")," is specified), ",(0,r.yg)("code",null,'"COUNT"')," and ",(0,r.yg)("code",null,'"SPECIFIC_ATTRIBUTES"')," (if ",(0,r.yg)("code",null,"attributes")," are specified)")),(0,r.yg)("tr",null,(0,r.yg)("td",null,(0,r.yg)("code",null,"filters")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"Record<string, Condition>")),(0,r.yg)("td",{align:"center"},"-"),(0,r.yg)("td",null,"For each entity name, a condition that must be satisfied in order for evaluated items of this entity to be returned (improves performances but does not reduce costs).",(0,r.yg)("br",null),(0,r.yg)("br",null),"Requires ",(0,r.yg)("a",{href:"#entities"},(0,r.yg)("code",null,"entities")),".",(0,r.yg)("br",null),(0,r.yg)("br",null),"See the ",(0,r.yg)("a",{href:"../../entities/actions/parse-condition#building-conditions"},(0,r.yg)("code",null,"ConditionParser"))," action for more details on how to write conditions.")),(0,r.yg)("tr",null,(0,r.yg)("td",null,(0,r.yg)("code",null,"attributes")),(0,r.yg)("td",{align:"center"},(0,r.yg)("code",null,"string[]")),(0,r.yg)("td",{align:"center"},"-"),(0,r.yg)("td",null,"To specify a list of attributes to retrieve (improves performances but does not reduce costs).",(0,r.yg)("br",null),(0,r.yg)("br",null),"Requires ",(0,r.yg)("a",{href:"#entities"},(0,r.yg)("code",null,"entities")),". Paths must be common to all entities.",(0,r.yg)("br",null),(0,r.yg)("br",null),"See the ",(0,r.yg)("a",{href:"../../entities/actions/parse-paths#paths"},(0,r.yg)("code",null,"PathParser"))," action for more details on how to write attribute paths.")))),(0,r.yg)("admonition",{title:"Examples",type:"note"},(0,r.yg)(l.A,{mdxType:"Tabs"},(0,r.yg)(o.A,{value:"consistent",label:"Strongly consistent",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"const { Items } = await PokeTable.build(QueryCommand)\n  .query({ partition: 'ashKetchum' })\n  .entities(PokemonEntity)\n  .options({\n    consistent: true\n  })\n  .send()\n"))),(0,r.yg)(o.A,{value:"indexed",label:"On index",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"const { Items } = await PokeTable.build(QueryCommand)\n  .query({\n    index: 'byTrainerId',\n    partition: 'TRAINER:ashKetchum',\n    range: { gte: 50 }\n  })\n  .entities(PokemonEntity)\n  .send()\n"))),(0,r.yg)(o.A,{value:"reverse",label:"Reversed",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"const { Items } = await PokeTable.build(QueryCommand)\n  .query({ partition: 'ashKetchum' })\n  .entities(PokemonEntity)\n  .options({\n    reverse: true\n  })\n  .send()\n"))),(0,r.yg)(o.A,{value:"multitenant",label:"Multitenant",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"const { Items } = await PokeTable.build(QueryCommand)\n  .query({ partition: 'ashKetchum' })\n  .entities(PokemonEntity)\n  .options({\n    tableName: `tenant-${tenantId}-pokemons`\n  })\n  .send()\n"))))),(0,r.yg)("admonition",{title:"Paginated",type:"note"},(0,r.yg)(l.A,{mdxType:"Tabs"},(0,r.yg)(o.A,{value:"paginated",label:"Paginated",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"let lastEvaluatedKey: Record<string, unknown> | undefined\nconst command = PokeTable.build(QueryCommand).query({\n  partition: 'ashKetchum'\n})\n\ndo {\n  const page = await command\n    .options({ exclusiveStartKey: lastEvaluatedKey })\n    .send()\n\n  // ...do something with page.Items here...\n\n  lastEvaluatedKey = page.LastEvaluatedKey\n} while (lastEvaluatedKey !== undefined)\n"))),(0,r.yg)(o.A,{value:"partition",label:"All Partition",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"const { Items } = await PokeTable.build(QueryCommand)\n  .query({ partition: 'ashKetchum' })\n  // Retrieve all items from the partition (beware of RAM issues!)\n  .options({\n    maxPages: Infinity\n  })\n  .send()\n"))))),(0,r.yg)("admonition",{title:"Filtered",type:"note"},(0,r.yg)(l.A,{mdxType:"Tabs"},(0,r.yg)(o.A,{value:"filtered",label:"Filtered",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"const { Items } = await PokeTable.build(QueryCommand)\n  .query({ partition: 'ashKetchum' })\n  .entities(PokemonEntity, TrainerEntity)\n  .options({\n    filters: {\n      POKEMONS: { attr: 'pokeType', eq: 'fire' },\n      TRAINERS: { attr: 'age', gt: 18 }\n    }\n  })\n  .send()\n"))),(0,r.yg)(o.A,{value:"attributes",label:"Attributes",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"const { Items } = await PokeTable.build(QueryCommand)\n  .query({ partition: 'ashKetchum' })\n  .entities(PokemonEntity)\n  .options({\n    attributes: ['name', 'type']\n  })\n  .send()\n"))),(0,r.yg)(o.A,{value:"count",label:"Count",mdxType:"TabItem"},(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"const { Count } = await PokeTable.build(QueryCommand)\n  .query({ partition: 'ashKetchum' })\n  .options({\n    select: 'COUNT'\n  })\n  .send()\n"))))),(0,r.yg)("h2",{id:"response"},"Response"),(0,r.yg)("p",null,"The data is returned using the same response syntax as the ",(0,r.yg)("a",{parentName:"p",href:"https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Query.html#API_Query_ResponseElements"},"DynamoDB Query API"),"."),(0,r.yg)("p",null,"If ",(0,r.yg)("a",{parentName:"p",href:"#entities"},(0,r.yg)("inlineCode",{parentName:"a"},"entities"))," have been provided, the response ",(0,r.yg)("inlineCode",{parentName:"p"},"Items")," are formatted by their respective entities."),(0,r.yg)("p",null,"You can use the ",(0,r.yg)("inlineCode",{parentName:"p"},"QueryResponse")," type to explicitly type an object as a ",(0,r.yg)("inlineCode",{parentName:"p"},"QueryCommand")," response object:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-ts"},"import type { QueryResponse } from 'dynamodb-toolbox/table/actions/query'\n\nconst scanResponse: QueryResponse<\n  typeof PokeTable,\n  // \ud83d\udc47 Query\n  { partition: 'ashKetchum' },\n  // \ud83d\udc47 Optional entities\n  [typeof PokemonEntity],\n  // \ud83d\udc47 Optional options\n  { attributes: ['name', 'type'] }\n> = { Items: ... }\n")))}p.isMDXComponent=!0}}]);